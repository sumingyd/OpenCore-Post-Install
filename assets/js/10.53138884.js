(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{312:function(t,a,e){t.exports=e.p+"assets/img/extension.70027081.png"},313:function(t,a,e){t.exports=e.p+"assets/img/done.4cbabcae.png"},314:function(t,a,e){t.exports=e.p+"assets/img/location.4d2c18e9.png"},315:function(t,a,e){t.exports=e.p+"assets/img/location_msi.26a0effc.png"},316:function(t,a,e){t.exports=e.p+"assets/img/blessoverride.9430a551.png"},317:function(t,a,e){t.exports=e.p+"assets/img/error.d007cbad.png"},456:function(t,a,e){"use strict";e.r(a);var s=e(10),o=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"安装和使用bootcamp工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装和使用bootcamp工具"}},[t._v("#")]),t._v(" 安装和使用BootCamp工具")]),t._v(" "),a("p",[t._v("OpenCore的一个简洁特性是能够完全避免BIOS，只使用启动盘进行多引导。当我们试图引导windows，但没有办法将引导选项设置回macOS时，问题就出现了。这就是BootCamp工具的用武之地。")]),t._v(" "),a("ul",[a("li",[t._v("注意:本指南将不介绍Windows安装程序的创建，只介绍BootCamp驱动程序的安装。\n"),a("ul",[a("li",[t._v("创建Windows安装程序的例子:"),a("a",{attrs:{href:"https://www.freecodecamp.org/news/how-make-a-windows-10-usb-using-your-mac-build-a-bootable-iso-from-your-macs-terminal/",target:"_blank",rel:"noopener noreferrer"}},[t._v("构建一个可引导的Windows ISO"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("提醒:Windows "),a("strong",[t._v("必须")]),t._v("基于GPT/GUID, OpenCore将不会引导legacy安装")])])]),t._v(" "),a("li",[t._v("注意2:从macOS使用BootCamp工具将擦除EFI/BOOT/BOOTx64.EFI文件，这是启动OpenCore所需的。而且OpenCore本身不支持基于MBR的安装，因此该实用程序对我们毫无用处")])]),t._v(" "),a("h2",{attrs:{id:"准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),a("p",[t._v("首先，我们需要以下内容:")]),t._v(" "),a("ul",[a("li",[t._v("已经安装Windows\n"),a("ul",[a("li",[t._v("必须基于UEFI / GPT")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/corpnewt/brigadier",target:"_blank",rel:"noopener noreferrer"}},[t._v("Brigadier"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[t._v("下载BootCamp驱动程序")])])]),t._v(" "),a("li",[t._v("设置[LauncherOption] (../multiboot/bootstrap.md)\n"),a("ul",[a("li",[t._v("不是必需的，但可以帮助缓解OpenCore使用的BOOTx64.efi擦除Windows时的头痛")])])])]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("安装非常简单，只需获取"),a("a",{attrs:{href:"https://github.com/corpnewt/brigadier",target:"_blank",rel:"noopener noreferrer"}},[t._v("Brigadier"),a("OutboundLink")],1),t._v("并运行"),a("code",[t._v("Brigadier")]),t._v("。Windows使用"),a("code",[t._v(".bat")]),t._v("， macOS使用"),a("code",[t._v("Brigadier.command")]),t._v("。如果你当前使用的SMBIOS有BootCamp问题，或者想下载另一个SMBIOS，你可以在末尾添加"),a("code",[t._v("——model{SMBIOS}")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("path/to/Brigadier "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--model")]),t._v(" MacPro7,1\n")])])]),a("ul",[a("li",[a("strong",[t._v("注意")]),t._v(":旧版本的BootCamp安装程序(6.0)不支持APFS，你需要选择一个更新的SMBIOS将它捆绑(即。iMac 19,1)或在安装后更新你的bootcamp软件。有关故障排除的更多细节请参见下面的内容:"),a("a",{attrs:{href:"#windows-startup-disk-cant-see-apfs-drives"}},[t._v("Windows启动磁盘无法看到APFS驱动器")])])]),t._v(" "),a("p",[a("img",{attrs:{src:e(312),alt:""}})]),t._v(" "),a("p",[t._v("接下来你会在下面找到我们的bootcamp驱动程序:")]),t._v(" "),a("ul",[a("li",[t._v("Windows:")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bootcamp-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("BootCamp\n")])])]),a("ul",[a("li",[t._v("macOS:")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("/Users/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/BootCamp-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/WindowsSupport.dmg\n")])])]),a("p",[t._v("macOS用户接下来需要扩展WindowsSupport.dmg，并把它放在Windows可以得到的地方。")]),t._v(" "),a("p",[a("img",{attrs:{src:e(313),alt:""}})]),t._v(" "),a("p",[t._v("接下来，在Windows中，您有两个选择。")]),t._v(" "),a("p",[t._v("要么导航到"),a("code",[t._v("bootcamp-{filename}\\ bootcamp")]),t._v("文件夹，然后运行"),a("code",[t._v("Setup. txt")]),t._v("文件。这需要正确的SMBIOS SystemProductName欺骗-显示为系统模型在Windows -以启动:")]),t._v(" "),a("p",[a("img",{attrs:{src:e(314),alt:""}})]),t._v(" "),a("p",[t._v("或者，以管理员身份启动"),a("code",[t._v("bootcamp-{filename}\\bootcamp\\Drivers\\Apple\\bootcamp.msi")]),t._v("——例如，通过直接从管理员命令shell启动它——这将完全跳过bootcamp模型检查:")]),t._v(" "),a("p",[a("img",{attrs:{src:e(315),alt:""}})]),t._v(" "),a("p",[t._v("一旦所有完成，你现在有BootCamp切换!在你的托盘中应该有一个小的BootCamp图标，现在你可以选择启动到哪个驱动器。")]),t._v(" "),a("ul",[a("li",[t._v("注意:对于那些不需要BootCamp提供的额外驱动程序，你可以删除以下内容:\n"),a("ul",[a("li",[a("code",[t._v("$WinPEDriver$")]),t._v(": "),a("strong",[t._v("不要")]),t._v("删除文件夹本身，只删除里面的驱动程序\n"),a("ul",[a("li",[t._v("苹果Wifi卡用户需要保留以下内容:\n"),a("ul",[a("li",[a("code",[t._v("$WinPEDriver$/BroadcomWireless")])]),t._v(" "),a("li",[a("code",[t._v("$WinPEDriver$/BroadcomBluetooth")])]),t._v(" "),a("li",[a("code",[t._v("$WinPEDriver$/AppleBluetoothBroadcom")])])])])])]),t._v(" "),a("li",[a("code",[t._v("BootCamp/Drivers/...")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("不要")]),t._v(" 删除 "),a("code",[t._v("BootCamp/Drivers/Apple")])]),t._v(" "),a("li",[t._v("苹果Wifi卡用户需要保留以下内容:\n"),a("ul",[a("li",[a("code",[t._v("BootCamp/Drivers/Broadcom/BroadcomBluetooth")])])])])])])])])]),t._v(" "),a("h2",{attrs:{id:"故障排除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#故障排除"}},[t._v("#")]),t._v(" 故障排除")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#cant-find-windowsbootcamp-drive-in-picker"}},[t._v("在选择器中找不到Windows/BootCamp驱动器")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#you-cant-change-the-startup-disk-to-the-selected-disk-error"}},[t._v('"您不能将启动磁盘更改为所选磁盘"错误')])]),t._v(" "),a("li",[a("a",{attrs:{href:"#booting-windows-results-in-bluescreen-or-Linux-crashes"}},[t._v("启动Windows会导致蓝屏或Linux崩溃")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#booting-windows-error-ocb-startimage-failed---already-started"}},[t._v("引导Windows错误:"),a("code",[t._v("OCB: StartImage failed - Already started")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#windows-startup-disk-cant-see-apfs-drives"}},[t._v("Windows启动盘看不到APFS驱动器")])])]),t._v(" "),a("h2",{attrs:{id:"在选择器中找不到windows-bootcamp驱动器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在选择器中找不到windows-bootcamp驱动器"}},[t._v("#")]),t._v(" 在选择器中找不到Windows/BootCamp驱动器")]),t._v(" "),a("p",[t._v("因此，使用OpenCore，我们必须注意，传统的Windows安装不支持，只有UEFI。现在大多数安装是基于UEFI的，但是那些由BootCamp Assistant在macOS中制作的是基于legacy的，所以你必须找到其他方法来制作安装程序(谷歌是你的朋友)。这也意味着MasterBootRecord/Hybrid分区也被破坏了，所以你需要格式化你想安装到DiskUtility的驱动器。")]),t._v(" "),a("p",[t._v("现在开始进行故障排除:")]),t._v(" "),a("ul",[a("li",[t._v("确保 "),a("code",[t._v("Misc -> Security -> ScanPolicy")]),t._v(" 设置为 "),a("code",[t._v("0")]),t._v(" 以显示所有驱动器")])]),t._v(" "),a("p",[t._v("如果Windows和OpenCore的引导加载程序在同一个驱动器上，你需要添加一个BlessOverride条目:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Misc -> BlessOverride -> \\EFI\\Microsoft\\Boot\\bootmgfw.efi\n")])])]),a("ul",[a("li",[a("strong",[t._v("注")]),t._v(":从OpenCore 0.5.9开始，这个不再需要指定。OpenCore应该会自动发现这个条目")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(316),alt:""}})]),t._v(" "),a("h2",{attrs:{id:"您不能将启动磁盘更改为所选磁盘-错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#您不能将启动磁盘更改为所选磁盘-错误"}},[t._v("#")]),t._v(' "您不能将启动磁盘更改为所选磁盘"错误')]),t._v(" "),a("p",[t._v("这通常是由以下原因引起的:")]),t._v(" "),a("ul",[a("li",[t._v("第三方NTFS驱动程序(即。Paragon)")]),t._v(" "),a("li",[t._v("Windows驱动器的不规则分区设置，特别是EFI不是第一个分区。")])]),t._v(" "),a("p",[t._v("要修复前者，要么禁用或卸载这些工具。")]),t._v(" "),a("p",[t._v("要解决后者，我们需要启用这个选项:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("PlatformInfo -> Generic -> AdviseFeatures -> True")])])]),t._v(" "),a("p",[a("img",{attrs:{src:e(317),alt:""}})]),t._v(" "),a("h2",{attrs:{id:"启动windows会导致蓝屏或linux崩溃"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动windows会导致蓝屏或linux崩溃"}},[t._v("#")]),t._v(" 启动Windows会导致蓝屏或Linux崩溃")]),t._v(" "),a("p",[t._v("这是由于对齐问题，请确保在支持MATs的固件上启用了"),a("code",[t._v("SyncRuntimePermissions")]),t._v("。检查你的日志，你的固件是否支持内存属性表(通常在2018年或更新的固件上看到)")]),t._v(" "),a("p",[t._v("对于Z390和更新的主板，您还需要启用"),a("code",[t._v("ProtectUefiServices")]),t._v("以确保正确应用OpenCore的补丁。")]),t._v(" "),a("p",[t._v("如果你的固件很旧(通常是2013年或更老)，你需要启用"),a("code",[t._v("ProtectMemoryRegions")]),t._v("。")]),t._v(" "),a("p",[t._v("由于不同厂商的固件版本不尽相同，你需要尝试一下这3种特性的组合，看看哪一种效果最好。")]),t._v(" "),a("p",[t._v("常见的Windows错误代码:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("0xc000000d")])])]),t._v(" "),a("h2",{attrs:{id:"引导windows错误-ocb-startimage-failed-already-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引导windows错误-ocb-startimage-failed-already-started"}},[t._v("#")]),t._v(" 引导Windows错误:"),a("code",[t._v("OCB: StartImage failed - Already started")])]),t._v(" "),a("p",[t._v("这是由于OpenCore在尝试引导Windows时感到困惑，并意外地认为它正在引导OpenCore。这可以通过移动Windows到它自己的驱动器"),a("em",[t._v("或")]),t._v("在BlessOverride下添加一个自定义驱动器路径来避免。参见"),a("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Configuration.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configuration.pdf"),a("OutboundLink")],1),t._v("和"),a("a",{attrs:{href:"#cant-find-windowsbootcamp-drive-in-picker"}},[t._v("在选择器中找不到Windows/BootCamp驱动器")]),t._v("条目了解更多详细信息。")]),t._v(" "),a("h2",{attrs:{id:"windows启动盘看不到apfs驱动器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows启动盘看不到apfs驱动器"}},[t._v("#")]),t._v(" Windows启动盘看不到APFS驱动器")]),t._v(" "),a("ul",[a("li",[t._v("过时的BootCamp驱动程序(通常6.0版本会附带brigadier, macOS中的BootCamp实用程序提供了较新的版本，如ver 6.1)。你可以尝试用苹果的软件更新程序更新到最新版本，或者从brigadier(也就是苹果电脑)选择更新的SMBIOS来缓解这些问题。（如’——iMac19,1’)和跑brigadier的时候。")])]),t._v(" "),a("p",[t._v("对于后者，你需要运行以下命令(将"),a("code",[t._v("文件名.msi")]),t._v("替换为BootCamp安装的msi):")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("msiexec.exe /x "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c:'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\f"}},[t._v("\\f")]),t._v('ilename.msi"')]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=o.exports}}]);